.. _base02:

[基础] 一条更新 SQL 语句是怎么执行的
#######################################################

假设我们的建表语句如下：

::

    create table T(ID int primary key, c int);

现在要将 ID = 2 的这一行的值 c 加 1，SQL 会这么写：

::

    update T set c=c+1 where ID=2;

前一节我们介绍过了 SQL 查询语句的执行链路，更新语句其实也是执行同样的流程。


更新语句的执行流程
----------------------------

1. 首先还是要连接数据库，这是连接器的工作
#. 如果表使用了查询缓存的话，这一步会清空缓存。这也是一般不建议使用查询缓存的原因
#. 分析器通过词法和语法分析，知道这是一条更新语句
#. 优化器判定要使用主键 ID 这个索引
#. 执行器负责执行，找到 ID = 2 的行，然后更新行数据

与查询流程不同的是，更新流程还涉及到两个重要的日志模块: **redo log（重做日志）** 和 **binlog（归档日志）** 。


日志模块
------------------





\ `返回顶部⬆︎ <#>`_\
